{"version":3,"file":"RadialChart.js","sources":["../src/hooks/useOnClickInternal.ts","../src/components/RadialChart/RadialChart.tsx"],"sourcesContent":["import { enrichEventWithDetails } from '@ui5/webcomponents-react-base/dist/Utils';\nimport { useCallback } from 'react';\n\nexport const useOnClickInternal = (onClick) =>\n  useCallback(\n    (payload, event) => {\n      if (typeof onClick === 'function') {\n        onClick(\n          enrichEventWithDetails(event, {\n            payload: payload?.activePayload?.[0]?.payload,\n            activePayloads: payload?.activePayload\n          })\n        );\n      }\n    },\n    [onClick]\n  );\n","import { ThemingParameters } from '@ui5/webcomponents-react-base/dist/ThemingParameters';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/dist/usePassThroughHtmlProps';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/dist/Utils';\nimport { ChartContainer } from '@ui5/webcomponents-react-charts/dist/components/ChartContainer';\nimport { PieChartPlaceholder } from '@ui5/webcomponents-react-charts/dist/PieChartPlaceholder';\nimport { CommonProps } from '@ui5/webcomponents-react/interfaces/CommonProps';\nimport React, { CSSProperties, FC, forwardRef, Ref, useCallback, useMemo } from 'react';\nimport { PolarAngleAxis, RadialBar, RadialBarChart } from 'recharts';\nimport { AxisDomain } from 'recharts/types/util/types';\nimport { useOnClickInternal } from '../../hooks/useOnClickInternal';\n\nexport interface RadialChartProps extends Omit<CommonProps, 'onClick'> {\n  /**\n   * The actual value which defines how much the ring is filled.\n   */\n  value?: number;\n  /**\n   * The maximum value of the ring. If `value` >= `maxValue`, the ring will be filled to 100%.\n   *\n   * Defaults to `100`.\n   */\n  maxValue?: number;\n  /**\n   * The value that should be displayed in the center of the `RadialChart`.\n   */\n  displayValue?: number | string;\n  /**\n   * A custom color you want to apply to the ring fill. This props accepts any valid CSS color or CSS variable.\n   */\n  color?: CSSProperties['color'];\n  /**\n   * `onDataPointClick` fires when the user clicks on the filled part of the ring.\n   * @param event\n   */\n  onDataPointClick?: (event: CustomEvent<{ value: unknown; payload: unknown; dataIndex: number }>) => void;\n  /**\n   * Fired when clicked anywhere in the chart.\n   */\n  onClick?: (event: CustomEvent<{ payload: unknown; activePayloads: Record<string, unknown>[] }>) => void;\n  /**\n   * `noAnimation` disables all chart animations when set to `true`.\n   */\n  noAnimation?: boolean;\n}\n\nconst radialChartMargin = { right: 30, left: 30, top: 30, bottom: 30 };\nconst radialBarBackground = { fill: ThemingParameters.sapContent_ImagePlaceholderBackground };\nconst radialBarLabelStyle = { fontSize: ThemingParameters.sapFontHeader3Size, fill: ThemingParameters.sapTextColor };\n\n/**\n * Displays a ring chart highlighting a current status.\n * The status can be emphasized by using the `color` prop.\n */\nconst RadialChart: FC<RadialChartProps> = forwardRef((props: RadialChartProps, ref: Ref<HTMLDivElement>) => {\n  const {\n    maxValue,\n    value,\n    displayValue,\n    onDataPointClick,\n    onClick,\n    color,\n    style,\n    className,\n    tooltip,\n    slot,\n    noAnimation\n  } = props;\n\n  const range = useMemo<AxisDomain>(() => {\n    return [0, maxValue];\n  }, [maxValue]);\n\n  const dataset = useMemo(() => [{ value }], [value]);\n\n  const onDataPointClickInternal = useCallback(\n    (payload, i, event) => {\n      if (payload && onDataPointClick) {\n        onDataPointClick(\n          enrichEventWithDetails(event, {\n            value: payload.value,\n            payload: payload.payload,\n            dataIndex: i\n          })\n        );\n      }\n    },\n    [onDataPointClick]\n  );\n\n  const onClickInternal = useOnClickInternal(onClick);\n\n  const passThroughProps = usePassThroughHtmlProps(props, ['onDataPointClick', 'onLegendClick', 'onClick']);\n\n  return (\n    <ChartContainer\n      dataset={dataset}\n      ref={ref}\n      Placeholder={PieChartPlaceholder}\n      style={style}\n      className={className}\n      tooltip={tooltip}\n      slot={slot}\n      resizeDebounce={250}\n      {...passThroughProps}\n    >\n      <RadialBarChart\n        onClick={onClickInternal}\n        margin={radialChartMargin}\n        innerRadius=\"90%\"\n        outerRadius=\"100%\"\n        barSize={10}\n        data={dataset}\n        cx=\"50%\"\n        cy=\"50%\"\n        startAngle={90}\n        endAngle={-270}\n      >\n        <PolarAngleAxis type=\"number\" domain={range} tick={false} />\n        <RadialBar\n          isAnimationActive={noAnimation === false}\n          background={radialBarBackground}\n          dataKey=\"value\"\n          cornerRadius=\"50%\"\n          fill={color ?? ThemingParameters.sapChart_OrderedColor_1}\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          onClick={onDataPointClickInternal}\n        />\n        <text\n          x=\"50%\"\n          y=\"50%\"\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n          className=\"progress-label\"\n          style={radialBarLabelStyle}\n        >\n          {displayValue}\n        </text>\n      </RadialBarChart>\n    </ChartContainer>\n  );\n});\n\nRadialChart.defaultProps = {\n  maxValue: 100,\n  noAnimation: false\n};\n\nRadialChart.displayName = 'RadialChart';\n\nexport { RadialChart };\n"],"names":["useOnClickInternal","onClick","useCallback","payload","event","enrichEventWithDetails","activePayload","activePayloads","radialChartMargin","right","left","top","bottom","radialBarBackground","fill","ThemingParameters","sapContent_ImagePlaceholderBackground","radialBarLabelStyle","fontSize","sapFontHeader3Size","sapTextColor","RadialChart","forwardRef","props","ref","maxValue","value","displayValue","onDataPointClick","color","style","className","tooltip","slot","noAnimation","range","useMemo","dataset","onDataPointClickInternal","i","dataIndex","onClickInternal","passThroughProps","usePassThroughHtmlProps","PieChartPlaceholder","sapChart_OrderedColor_1","defaultProps","displayName"],"mappings":"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"}